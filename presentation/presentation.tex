\documentclass[aspectratio=169,12pt]{beamer}

% Use Inter font - must come before theme
\usepackage{fontspec}
\setmainfont{Inter}
\setsansfont{Inter}
\setmonofont{Inter}

\usetheme{Madrid}

% Change color scheme from blue to black - AFTER theme is loaded
\setbeamercolor{structure}{fg=black}
\setbeamercolor{palette primary}{bg=black,fg=white}
\setbeamercolor{palette secondary}{bg=black!90,fg=white}
\setbeamercolor{palette tertiary}{bg=black!80,fg=white}
\setbeamercolor{palette quaternary}{bg=black!70,fg=white}
\setbeamercolor{titlelike}{bg=black,fg=white}
\setbeamercolor{frametitle}{bg=black,fg=white}
\setbeamercolor{block title}{bg=black!90,fg=white}
\setbeamercolor{block body}{bg=black!5,fg=black}
\setbeamercolor{item}{fg=black}
\setbeamercolor{subitem}{fg=black}
\setbeamercolor{subsubitem}{fg=black}
\setbeamercolor{section in head/foot}{bg=black,fg=white}
\setbeamercolor{subsection in head/foot}{bg=black!90,fg=white}
\setbeamercolor{author in head/foot}{bg=black,fg=white}
\setbeamercolor{title in head/foot}{bg=black!90,fg=white}
\setbeamercolor{date in head/foot}{bg=black!80,fg=white}

\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{footline}{
  \leavevmode%
  \hbox{%
    \begin{beamercolorbox}[wd=\paperwidth,ht=2.5ex,dp=1ex,right]{white}%
      \usebeamerfont{date in head/foot}
      \textcolor{black}{\insertframenumber{} / \inserttotalframenumber}\hspace*{2ex}
    \end{beamercolorbox}%
  }%
  \vskip0pt%
}

% Set all fonts to 12pt (including titles and headings) and make them bold
\setbeamerfont{title}{size=\fontsize{12}{14},series=\bfseries}
\setbeamerfont{subtitle}{size=\fontsize{12}{14},series=\bfseries}
\setbeamerfont{author}{size=\fontsize{12}{14},series=\bfseries}
\setbeamerfont{frametitle}{size=\fontsize{12}{14},series=\bfseries}
\setbeamerfont{framesubtitle}{size=\fontsize{12}{14},series=\bfseries}
\setbeamerfont{block title}{size=\fontsize{12}{14},series=\bfseries}

\title{AirTraffic}
\subtitle{CLI Network Tool}
\author{Athul Noble \\ Avaneesh Rao \\ Jayesh Patil}
\date{}

\begin{document}

\begin{frame}
  \titlepage
\end{frame}

%------------------------------------------------------------------------------
\section{Overview}
\begin{frame}{What is AirTraffic?}
  \textbf{Cross-platform CLI} for:
  \begin{itemize}
    \item \textbf{Monitoring} network usage per application (live \& historical)
    \item \textbf{Blocking / allowing} apps from using the network
  \end{itemize}
  \vspace{0.5em}
  \textbf{Platforms:} macOS, Linux, Windows \\
  \textbf{Stack:} Python 3.7+, \texttt{psutil}, SQLite
\end{frame}

%------------------------------------------------------------------------------
\section{Features}
\begin{frame}{Features}
  \textbf{1. Monitor Network Usage}
  \begin{itemize}
    \item Real-time dashboard with live statistics
    \item Historical usage tracking since any point in time
    \item Per-application bandwidth breakdown
  \end{itemize}
  
  \vspace{1em}
  \textbf{2. Block/Allow Applications}
  \begin{itemize}
    \item Block specific apps or all running apps
    \item Allow previously blocked apps
    \item List blocked and allowed applications
  \end{itemize}
\end{frame}

%------------------------------------------------------------------------------
\section{Architecture}
\begin{frame}{Architecture}
  \begin{center}
    \begin{tabular}{ll}
      \textbf{Module} & \textbf{What it does} \\
      \hline
      \texttt{cli.py} & Handles commands you type \\
      \texttt{daemon.py} & Runs in background, checks network every 60s \\
      \texttt{monitor.py} & Tracks which app uses how much data \\
      \texttt{database.py} & Stores and retrieves usage history \\
      \texttt{firewall.py} & Blocks or allows apps from using internet \\
    \end{tabular}
  \end{center}
\end{frame}

%------------------------------------------------------------------------------
\section{How It Works}
\begin{frame}{How It Works: Monitoring}
  \textbf{Monitoring Network Usage:}
  \begin{itemize}
    \item Background daemon checks network every 60s using \texttt{psutil}
    \item Tracks bytes sent/received per process (maps PIDs to apps)
    \item Stores historical data in SQLite database
    \item Live mode: real-time monitoring without database
    \item Historical mode: queries database and aggregates usage
  \end{itemize}
\end{frame}

\begin{frame}{How It Works: Blocking Applications}
  \textbf{Blocking Applications:}
  \begin{itemize}
    \item \textbf{macOS:} Uses \texttt{socketfilterfw} (Application Firewall) -- blocks at kernel level
    \item \textbf{Linux:} Uses \texttt{iptables}/\texttt{nftables} with command matching -- automatic fallback
    \item \textbf{Windows:} Uses \texttt{netsh advfirewall} to create inbound/outbound block rules
    \item All methods block at OS level -- apps cannot bypass
    \item Works reliably across all platforms with improved error handling
  \end{itemize}
\end{frame}

%------------------------------------------------------------------------------
\section{Install \& usage}
\begin{frame}[fragile]{Installation}
  \textbf{Install:}
  \begin{verbatim}
pip install -e .
sudo airtraffic install   # Starts background daemon
  \end{verbatim}
  
  \vspace{1em}
  \textbf{Uninstall:}
  \begin{verbatim}
sudo airtraffic uninstall   # Stops daemon & removes service
  \end{verbatim}
\end{frame}

\begin{frame}{Usage: Monitoring}
  \textbf{Monitor Network Usage:}
  \begin{itemize}
    \item \texttt{sudo airtraffic live} -- Real-time dashboard
    \item \texttt{airtraffic since today} -- Usage since today 12:00 AM
    \item \texttt{airtraffic since month} -- Usage since first of month 12:00 AM
    \item \texttt{airtraffic since "17:01:2026 14:30:00"} -- Custom date/time (dd:mm:yyyy hh:mm:ss)
  \end{itemize}
\end{frame}

\begin{frame}{Usage: Block/Allow Apps}
  \textbf{Block/Allow Apps:}
  \begin{itemize}
    \item \texttt{sudo airtraffic block Application} -- Block app from accessing network
    \item \texttt{sudo airtraffic allow Application} -- Allow app to access network
    \item \texttt{sudo airtraffic block all} -- Block all running apps
    \item \texttt{sudo airtraffic allow all} -- Allow all blocked apps
    \item \texttt{airtraffic blocked} -- List blocked applications
    \item \texttt{airtraffic allowed} -- List allowed applications
  \end{itemize}
\end{frame}

%------------------------------------------------------------------------------
\section{Summary}
\begin{frame}{Summary}
  AirTraffic is a cross-platform CLI tool for monitoring and controlling network access per application.
  
  \vspace{1em}
  \begin{itemize}
    \item Monitor network usage in real-time or historically
    \item Block applications from accessing the network without closing them
    \item Works on macOS, Linux, and Windows using native OS firewalls
    \item Background daemon tracks usage continuously
    \item Simple commands for complete network control
  \end{itemize}
\end{frame}

\end{document}
